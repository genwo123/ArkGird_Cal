# 아크 그리드 최적화 계산기

RPG 게임의 그리드 시스템에서 젬을 최적으로 배치하여 최대 포인트를 얻을 수 있는 조합을 계산해주는 도구입니다.

## 📋 목차
- [파일 구조](#파일-구조)
- [주요 기능](#주요-기능)
- [데이터 저장 시스템](#데이터-저장-시스템)
- [사용 방법](#사용-방법)
- [계산 로직](#계산-로직)
- [기술 스택](#기술-스택)
- [브라우저 호환성](#브라우저-호환성)

## 📁 파일 구조

```
├── index.html                    # 메인 HTML 파일
├── css/
│   ├── styles.css               # 메인 스타일시트
│   └── header-styles.css        # 헤더 및 데이터 관리 스타일
├── js/
│   ├── main.js                  # 메인 스크립트 및 초기화
│   ├── indexeddb-manager.js     # IndexedDB 데이터 관리 클래스
│   ├── utils.js                 # 유틸리티 함수들
│   ├── grid-manager.js          # 그리드 관리 기능
│   ├── gem-manager.js           # 젬 관리 기능
│   ├── calculator.js            # 최적화 계산 로직
│   └── display.js               # 결과 표시 기능
└── README.md                    # 이 파일
```

## 🚀 주요 기능

### 그리드 및 젬 관리
- **그리드 관리**: 질서/혼돈 × 해/달/별 × 영웅/전설/유물/고대 등급 선택
- **젬 관리**: 타입별 젬 종류 자동 변경 (질서: 안정/견고/불변, 혼돈: 침식/왜곡/붕괴)
- **실시간 업데이트**: 젬/그리드 추가/삭제 시 즉시 화면 반영

### 최적화 계산
- **스마트 계산**: 4개 미만이어도 최대한 많은 젬을 활성화하는 조합 계산
- **의지력 효율**: 각 젬의 기본 의지력에서 효율을 차감한 실제 필요 의지력 계산
- **우선순위 최적화**: 포인트가 높은 조합을 우선적으로 선택

### 결과 표시
- **테이블 형태**: 그리드별 젬 배치를 한눈에 보기 쉬운 테이블로 표시
- **총 포인트 계산**: 모든 그리드의 포인트 합계 표시
- **사용되지 않은 젬**: 계산에 포함되지 않은 젬들도 별도 표시
- **상세 정보**: 각 젬의 의지력 필요량과 포인트 정보 표시

## 💾 데이터 저장 시스템

### IndexedDB 기반 자동 저장
- **자동 저장**: 30초마다 현재 데이터 자동 저장
- **즉시 저장**: 젬/그리드 추가/삭제 시 즉시 IndexedDB에 저장
- **브라우저 영구 저장**: 브라우저를 종료해도 데이터 유지

### 저장 파일 관리
- **버전 관리**: 'Save_날짜_V버전' 형식의 파일명 자동 생성
- **다중 저장**: 여러 버전의 저장 파일 관리 가능
- **저장 목록**: 저장된 파일 목록 확인 및 선택적 불러오기
- **파일 삭제**: 불필요한 저장 파일 삭제 기능

### 백업 시스템
- **JSON 내보내기**: 컴퓨터에 JSON 파일로 백업 저장
- **JSON 가져오기**: 백업 파일에서 데이터 복원
- **간소화된 데이터**: 필요한 핵심 정보만 저장하여 파일 크기 최적화
- **호환성**: 기존 형식과 새 형식 모두 지원

## 📖 사용 방법

### 1. 기본 사용법
1. `index.html` 파일을 웹 브라우저에서 열기
2. **그리드 추가**: 타입(질서/혼돈), 종류(해/달/별), 등급 선택 후 "그리드 추가"
3. **젬 추가**: 타입, 종류, 의지력 효율, 포인트 입력 후 "젬 추가"
4. **계산하기**: "최적 조합 계산하기" 버튼 클릭
5. **결과 확인**: 각 그리드별 최적 젬 배치와 총 포인트 확인

### 2. 데이터 관리
#### 저장관리 메뉴 (드롭다운)
- **새로 저장**: 현재 상태를 새 파일로 저장 (버전 지정 가능)
- **불러오기**: 저장된 파일 목록에서 선택해서 복원
- **컴퓨터에 백업**: JSON 파일을 컴퓨터에 다운로드
- **백업 파일 복원**: 컴퓨터의 JSON 파일을 업로드해서 복원

#### 빠른저장 버튼
- 원클릭으로 현재 상태 즉시 저장

### 3. 자동 저장 확인
- 헤더 우측의 초록색 점이 깜빡이면 자동 저장이 활성화된 상태
- 30초마다 자동으로 현재 데이터 저장

## 🧮 계산 로직

### 최적화 알고리즘
1. **타입 매칭**: 각 그리드별로 호환되는 타입(질서/혼돈)의 젬만 선별
2. **조합 생성**: 4개 → 3개 → 2개 → 1개 순으로 가능한 모든 조합 생성
3. **의지력 검증**: 각 조합의 총 의지력 필요량이 그리드 포인트 이하인지 확인
4. **포인트 최적화**: 유효한 조합 중 가장 높은 포인트를 제공하는 조합 선택
5. **젬 배타적 사용**: 사용된 젬은 다음 그리드 계산에서 제외

### 의지력 계산 공식
```
실제 필요 의지력 = max(1, 기본 의지력 - 효율)

기본 의지력:
- 안정/침식: 8
- 견고/왜곡: 9  
- 불변/붕괴: 10
```

## 🛠 기술 스택

### 프론트엔드
- **HTML5**: 시맨틱 마크업 및 모던 웹 표준
- **CSS3**: 그라디언트, 애니메이션, 반응형 디자인
- **Vanilla JavaScript**: 순수 자바스크립트 (ES6+)

### 데이터 저장
- **IndexedDB**: 브라우저 내장 NoSQL 데이터베이스
- **JSON**: 백업 파일 형식
- **Blob API**: 파일 다운로드 기능

### 주요 기능
- **async/await**: 비동기 데이터 처리
- **Promise**: 데이터베이스 작업 비동기 처리
- **File API**: 파일 업로드 처리
- **CSS Animation**: 부드러운 UI 애니메이션

## 🌐 브라우저 호환성

### 지원 브라우저
- **Chrome 58+**: 완전 지원
- **Firefox 55+**: 완전 지원  
- **Safari 12+**: 완전 지원
- **Edge 79+**: 완전 지원

### 모바일 지원
- **반응형 디자인**: 모바일 및 태블릿에서 최적화된 UI
- **터치 인터페이스**: 모바일 터치 조작 지원
- **적응형 레이아웃**: 화면 크기에 따른 레이아웃 자동 조정

## 🐛 문제 해결

### 데이터가 저장되지 않는 경우
1. 브라우저의 개인정보 보호 모드에서는 IndexedDB가 제한될 수 있습니다
2. 브라우저 저장소 설정에서 쿠키 및 사이트 데이터 허용 확인
3. F12 개발자 도구의 콘솔에서 오류 메시지 확인

### 계산 결과가 나오지 않는 경우
1. 그리드와 젬의 타입(질서/혼돈)이 일치하는지 확인
2. 젬의 의지력 필요량이 그리드 포인트보다 작은지 확인
3. F12 개발자 도구의 콘솔에서 계산 과정 로그 확인

## 📝 개발자 정보

### 디버깅
- **콘솔 로그**: F12 개발자 도구에서 상세한 계산 과정 확인 가능
- **데이터 확인**: IndexedDB 탭에서 저장된 데이터 직접 확인 가능
- **성능 모니터링**: 자동 저장 및 계산 성능 실시간 모니터링

### 확장 가능성
- **모듈화 구조**: 각 기능별로 분리된 파일 구조로 유지보수 용이
- **확장 가능한 데이터 구조**: 새로운 젬 타입이나 그리드 추가 용이
- **API 호환**: 외부 데이터 소스와의 연동 가능한 구조